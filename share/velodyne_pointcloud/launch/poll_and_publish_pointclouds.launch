<launch>

<!--
  <arg name="model" default="VLP16" />
  <arg name="calibration" default="$(find velodyne_pointcloud)/params/VLP16_calibration.yaml"/>
-->
  <arg name="model" default="32E" />
  <arg name="calibration" default="$(find velodyne_pointcloud)/params/32E_calibration.yaml"/>
<!--
  <arg name="model" default="64E_S2" />
  <arg name="calibration" default="$(find velodyne_pointcloud)/params/64E_S2_calibration.yaml" />
-->
  <arg name="min_range" default="0.9" />
  <arg name="max_range" default="130.0" />
  <arg name="organized" default="true" />
  <arg name="imu_sync" default="" />
<!--  <arg name="imu_sync" default="xsens" /> -->
  <arg name="use_gps" default="true" />
  <arg name="use_seq" default="false" />

  <include file="$(find velodyne_pointcloud)/launch/poll_and_publish_packets.launch">
    <arg name="calibration" value="$(arg calibration)" />
    <arg name="model" value="$(arg model)" />
    <arg name="pcap" value="" />
  </include>

  <node pkg="nodelet" type="nodelet" name="cloud_nodelet"
        args="load velodyne_pointcloud/CloudNodelet velodyne_nodelet_manager">
    <param name="calibration" value="$(arg calibration)"/>
    <param name="model" value="$(arg model)"/>
    <param name="min_range" value="$(arg min_range)"/>
    <param name="max_range" value="$(arg max_range)"/>
    <param name="organized" value="$(arg organized)"/>
    <param name="imu_sync" value="$(arg imu_sync)"/>
    <param name="use_gps" value="$(arg use_gps)"/>
    <param name="use_seq" value="$(arg use_seq)"/>
        <remap from="/velodyne_points" to="/dusensor/velodyne/points"/>
        <remap from="/velodyne_packets" to="/dusensor/velodyne/packets"  />
  </node>

<!--
  <node pkg="nodelet" type="nodelet" name="compensator_nodelet"
        args="load velodyne_pointcloud/CompensatorNodelet velodyne_nodelet_manager">
    <param name="child_frame_id" value="velodyne_compensated" type="str"/>
  </node>
-->
</launch>
